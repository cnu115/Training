<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="alert alert-warning hidden" id="warning">
<!--            <strong>Warning!</strong> error-->
        </div>

        <h3 >Registration</h3>
        <form>
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" class="form-control name" id="name">
            </div>
            <div class="form-group">
                <label for="email">Email address:</label>
                <input type="email" class="form-control" id="email">
            </div>
            <div class="form-group">
                <label for="pwd">Password:</label>
                <input type="password" class="form-control" id="pwd">
            </div>
            <button type="button" onclick="registration()" class="btn btn-default">Submit</button>
        </form>
        <br />
        <br />
        <h3 >Login</h3>
        <form>
            <div class="form-group">
                <label for="email">Email address:</label>
                <input type="email" class="form-control" id="loginEmail">
            </div>
            <div class="form-group">
                <label for="pwd">Password:</label>
                <input type="password" class="form-control" id="loginPassowrd">
            </div>
            <button type="button" onclick="login()" class="btn btn-default">Submit</button>
        </form>
    </div>
</body>
<script>
    //Promises
    const b = () => {
        return new Promise(((resolve, reject) => {
            try {
                window.setTimeout(() => {
                    // console.log('c function value ',2)
                    // return 2;
                    return resolve(2);
                }, 500)
            }catch (e) {
                reject(e)
            }

        }))

    }
    const a = 1;
    // console.log('calculation ', a+b());
    // console.log('b value ', b());
    b().then(res => {
        console.log('then function res ', res);
        const c = a + res;
        console.log(c)
    }).catch(err =>{
        console.log('error ', err)
    })
    console.log('a ', a);


    // async and await
    const cal = async () => {
        const bValue = await b();
        console.log('async cal ', a+ bValue);
    }

    cal();


</script>
<script>
    const errorHandling = (identifier, action) => {
        const warning =  document.getElementById('warning');
        warning.classList.remove('hidden');
        const span = document.createElement("span");         // Create a text node
        span.innerHTML = action === 'creation' ? `Please enter ${identifier} <br/>` : 'Authentication wrong';
        warning.append(span);
    }
    const storage = (name, value) => {
        localStorage.setItem(name, value)
    }
    const getFromStorage = (name) => {
       return localStorage.getItem(name)
    }
    const registration = () => {
        const warning =  document.getElementById('warning');
        warning.innerHTML = '';
       const name= document.getElementById('name');
       const email = document.getElementById('email');
       const password = document.getElementById('pwd');
       name.value === '' ? errorHandling('name', 'creation') : '';
       email.value === '' ? errorHandling('email', 'creation') : '';
       password.value === '' ? errorHandling('password', 'creation') : '';

       if(name.value !== '' && email.value !== '' && password.value !== ''){
           //fetch()
           storage('name', name.value);
           storage('email', email.value);
           storage('password', password.value)

           alert('data stored successfully!');

           // window.setTimeout(() => {
           //     location.reload();
           // }, 500);
           //
           // //clearTimeout(timeOut)
           //
           //
           // let i = 0
           // const interVal = window.setInterval(() => {
           //      i = i+1;
           //      console.log('I value ', i);
           //      i === 10 ? clearInterval(interVal) : '';
           // },500)



       }

       console.log(`name ${name.value} email ${email.value} password ${password.value}`)
    }
    const login = () => {
        const emailValue = document.getElementById('loginEmail').value;
        const passwoedValue = document.getElementById('loginPassowrd').value;
        const emailValueFromDb = getFromStorage('email');
        const passwordValueFromDb = getFromStorage('password');
        const warning =  document.getElementById('warning');
        warning.innerHTML = '';
        // debugger;
        if(emailValue === emailValueFromDb && passwoedValue === passwordValueFromDb){
            alert('authentication successful')
        }else{
            errorHandling('', '');
        }
    }

    //localStorage.clear();
    //localStorage.removeItem('name')


</script>
</html>